(function(g){g=window[g];g._t=g._t||1*new Date;if("function"!==typeof g&&"object"!==typeof g||g.has_load_sdk)return!1;g.has_load_sdk=!0;"object"!==typeof JSON&&(JSON={});(function(){function a(a){return 10>a?"0"+a:a}function e(){return this.valueOf()}function f(a){u.lastIndex=0;return u.test(a)?'"'+a.replace(u,function(a){var c=q[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,c){var e,b,h,t,g=m,k,l=c[a];l&&"object"===typeof l&&"function"===
typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof p&&(l=p.call(c,a,l));switch(typeof l){case "string":return f(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";m+=r;k=[];if("[object Array]"===Object.prototype.toString.apply(l)){t=l.length;for(e=0;e<t;e+=1)k[e]=d(e,l)||"null";h=0===k.length?"[]":m?"[\n"+m+k.join(",\n"+m)+"\n"+g+"]":"["+k.join(",")+"]";m=g;return h}if(p&&"object"===typeof p)for(t=p.length,e=0;e<t;e+=
    1)"string"===typeof p[e]&&(b=p[e],(h=d(b,l))&&k.push(f(b)+(m?": ":":")+h));else for(b in l)Object.prototype.hasOwnProperty.call(l,b)&&(h=d(b,l))&&k.push(f(b)+(m?": ":":")+h);h=0===k.length?"{}":m?"{\n"+m+k.join(",\n"+m)+"\n"+g+"}":"{"+k.join(",")+"}";m=g;return h}}var c=/^[\],:{}\s]*$/,b=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,h=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,u=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    n=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=e,Number.prototype.toJSON=e,String.prototype.toJSON=e);var m,r,q,p;"function"!==typeof JSON.stringify&&
(q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,c,e){var b;r=m="";if("number"===typeof e)for(b=0;b<e;b+=1)r+=" ";else"string"===typeof e&&(r=e);if((p=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function f(a,c){var b,d,h=a[c];if(h&&"object"===typeof h)for(b in h)Object.prototype.hasOwnProperty.call(h,
    b)&&(d=f(h,b),void 0!==d?h[b]=d:delete h[b]);return e.call(a,c,h)}var d;a=String(a);n.lastIndex=0;n.test(a)&&(a=a.replace(n,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(c.test(a.replace(b,"@").replace(h,"]").replace(g,"")))return d=eval("("+a+")"),"function"===typeof e?f({"":d},""):d;throw new SyntaxError("JSON.parse");})})();var b=g._={},q=Array.prototype,v=Object.prototype,w=q.slice,n=v.toString,x=v.hasOwnProperty;g.lib_version="0.0.1";(function(){var a=q.forEach,
    e=Array.isArray,f={},d=b.each=function(c,e,b){if(null==c)return!1;if(a&&c.forEach===a)c.forEach(e,b);else if(c.length===+c.length)for(var d=0,h=c.length;d<h;d++){if(d in c&&e.call(b,c[d],d,c)===f)return!1}else for(d in c)if(x.call(c,d)&&e.call(b,c[d],d,c)===f)return!1};b.extend=function(a){d(w.call(arguments,1),function(c){for(var e in c)void 0!==c[e]&&(a[e]=c[e])});return a};b.isArray=e||function(a){return"[object Array]"===n.call(a)}})();b.isObject=function(a){return"[object Object]"==n.call(a)};
    b.isUndefined=function(a){return void 0===a};b.isString=function(a){return"[object String]"==n.call(a)};b.isJSONObj=function(a){try{JSON.stringify(a)}catch(e){return!1}return!0};b.Encode=function(a,e){var b=encodeURIComponent;return b instanceof Function?e?encodeURI(a):b(a):escape(a)};b.isempty=function(a){return void 0==a||""==a};b.getTrackerName=function(a){if(b.isempty(a)||b.isempty(a.tracker))a="_l";else if(b.isString(a.tracker))a=a.tracker;else throw"options.tracker must be string";return a};
    b.emptyFunction=function(){};b.isFunction=function(a){return"[object Function]"===n.call(a)};b.loadScript=function(a,e){var b=document.createElement("script");b.type="text/javascript";b.readyState?b.onreadystatechange=function(){if("loaded"==b.readyState||"complete"==b.readyState)b.onreadystatechange=null,e()}:b.onload=function(){e()};b.src=a;document.body.appendChild(b)};b.domian={cn:"lemon.le.com",hk:"lemon-hk.le.com",us:"lemon-us.le.com",ru:"lemon-ru.le.com","in":"lemon-in.le.com",mo:"lemon-hk.le.com",
        th:"lemon-us.le.com",sg:"lemon-us.le.com",id:"lemon-us.le.com",test:"10.110.123.84:8080"};b.getServerUrl=function(a,e){var f="https:"==document.location.protocol?" https://":" http://",d;if(0==e||1==e)d="/beta_jssdkmsg";else if(2==e)d="/jssdk_event";else throw"ext must be 0\u30011\u30012";var c=b.domian[a];if(b.isempty(c))throw"please input correct country name";return f+c+d};b.utf8Encode=function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b="",f,d,c,g;f=d=0;c=a.length;for(g=0;g<c;g++){var h=
        a.charCodeAt(g),k=null;128>h?d++:k=127<h&&2048>h?String.fromCharCode(h>>6|192,h&63|128):String.fromCharCode(h>>12|224,h>>6&63|128,h&63|128);null!==k&&(d>f&&(b+=a.substring(f,d)),b+=k,f=d=g+1)}d>f&&(b+=a.substring(f,a.length));return b};b.base64Encode=function(a){var e,f,d,c,g=0,h=0,k=[];if(!a)return a;a=b.utf8Encode(a);do e=a.charCodeAt(g++),f=a.charCodeAt(g++),d=a.charCodeAt(g++),c=e<<16|f<<8|d,e=c>>18&63,f=c>>12&63,d=c>>6&63,c&=63,k[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c);while(g<a.length);g=k.join("");switch(a.length%3){case 1:g=g.slice(0,-2)+"==";break;case 2:g=g.slice(0,-1)+"="}return g};b.cloneObj=function(a){return JSON.parse(JSON.stringify(a))};b.msgnum=0;b.cookie={get:function(a){a+="=";for(var b=document.cookie.split(";"),f=0;f<
    b.length;f++){for(var d=b[f];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return""},set:function(a,b,f,d,c){var e="",g="",k="";f="undefined"===typeof f?730:f;if("undefined"===typeof d?0:d)e=(e=(e=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?e[0]:"")?"; domain=."+e:"";0!==f&&(g=new Date,"s"===String(f).slice(-1)?g.setTime(g.getTime()+1E3*Number(String(f).slice(0,-1))):g.setTime(g.getTime()+864E5*
        f),g="; expires="+g.toGMTString());c&&(k="; secure");document.cookie=a+"="+encodeURIComponent(b)+g+"; path=/"+e+k},remove:function(a,e){b.cookie.set(a,"",-1,"undefined"===typeof e?!1:e)}};b.info={pageProp:{},initPage:function(){var a=this.getRefurl(),e=location.href,f=document.title,d=window.screen,d=d?d.width+"x"+d.height:"",c=window.navigator,g=b.Encode(window.document.characterSet?window.document.characterSet:window.document.charset?window.document.charset:""),c=c&&c.language?c.language:c&&c.browserLanguage?
        c.browserLanguage:"",h=this.getSrcurl(),k=this.getSessionid(),n=this.getDeviceid();this.pageProp={encode:g,session_id:k,browserLang:c,screen:d,url:e,ref_url:a,src_url:h,title:f,device_uuid:n,cross_id:""}},getRefurl:function(){var a="";try{a=window.top.document.referrer}catch(e){if(window.parent)try{a=window.parent.document.referrer}catch(f){a=""}}""===a&&(a=document.referrer);return a},getSrcurl:function(){var a=b.cookie.get("la_src");!a&&this.getRefurl()&&(a=this.getRefurl(),console.log("second get srcurl:"+
        a),b.cookie.set("la_src",a,0));return a},getSessionid:function(){var a=b.cookie.get("la_sg"),e=b.cookie.get("la_sid");if(null==a||""==a)e=this.genUid32(),b.cookie.set("la_sg","1",0,!0);else if(null==e||""==e)e=this.genUid32();b.cookie.set("la_sid",e,"1800s",!0);return e},genUid32:function(){for(var a="",b=32;b--;)a+=Math.floor(16*Math.random()).toString(16);return a},getDeviceid:function(){var a=b.cookie.get("la_device");a||(a=this.genUid32(),b.cookie.set("la_device",a,3650,!0));return a}};b.sendRequest=
    {};b.sendRequest.send=function(a,b,f){2036>=b.length?this.sendByImage(a,b,f):8192>=b.length&&(this.sendByBeacon(a,b,f)||this.sendByRequest(a,b,f)||this.sendByImage(a,b,f))};b.sendRequest.sendByImage=function(a,b,f){var d=document.createElement("img");d.width=1;d.height=1;d.src=a+"?"+b;d.onload=d.onerror=function(){d.onload=null;d.onerror=null;f()}};b.sendRequest.sendByRequest=function(a,b,f){var d,c=window.XDomainRequest;if(c)d=new c,d.open("POST",a);else if(c=window.XMLHttpRequest)c=new c,"withCredentials"in
    c&&(d=c,d.open("POST",a,!0),d.setRequestHeader("Content-Type","text/plain"));return d?(d.onreadystatechange=function(){4==d.readyState&&(f&&f(),d=null)},d.send(b),!0):!1};b.sendRequest.sendByBeacon=function(a,b,f){return window.navigator.sendBeacon?window.navigator.sendBeacon(a,b)?(f(),!0):!1:!1};g.init=function(a,e,f,d,c){c=c||{};if(!b.isObject(c))throw"options must be Object";0==f&&"cn"==e&&"http:"==document.location.protocol&&b.loadScript(" http://jstatic.letvcdn.com/sdk/flashstorage_sdk.js",function(){window.FlashStorageSDK.getLetvCookie()});
        c=b.getTrackerName(c);g._[c]={};g._[c].basic={};g._[c].basic.agnes={};c=g._[c].basic.agnes;c.appname=a;c.country=e;c.platform=f;c.ext=d;b.extend(c,b.info.pageProp)};g.signin=function(a){if(!b.isempty(a)&&b.isString(a))b.cookie.set("la_uid",a,730,!0);else throw"uid could not be empty and must be sring";};g.trackwithbasic=function(a,e,f,d,c){a=a||"";f=f||{};d=d||b.emptyFunction;c=c||{};if(!b.isString(a))throw"event name must be string";if(!b.isJSONObj(f))throw"props must be JSON Object";if(!b.isJSONObj(e))throw"props must be JSON Object";
        if(!b.isFunction(d))throw"callback must be a function";if(!b.isObject(c))throw"options must be Object";++b.msgnum;var n=String(1*new Date);c=b.getTrackerName(c);c=b.cloneObj(g._[c]);var h=c.basic.agnes;b.extend(c.basic,e);h.e_name=a;h.stime=n;h.uid=b.cookie.get("la_uid");h.cross_id=b.cookie.get("tj_lc");a=h.device_uuid+"-"+n;a=a+"-"+b.msgnum;h.msg_id=a;c.props=f;f=b.getServerUrl(h.country,h.ext);console.log(c);a=b.Encode(b.base64Encode(JSON.stringify(c)));b.sendRequest.send(f,a,d,1)};g.track=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  b,f,d){g.trackwithbasic(a,{},b,f,d)};g.tracksearch=function(a,b,f,d,c){g.trackwithbasic(a,{search:b},f,d,c)};g.trackad=function(a,b,f,d,c){g.trackwithbasic(a,{ad:b},f,d,c)};g.trackrecommend=function(a,b,f,d,c){g.trackwithbasic(a,{recommend:b},f,d,c)};g.start=function(){b.info.initPage();b.each(g._q,function(a){g[a[0]].apply(g,w.call(a[1]))})};g.start()})(window.LetvAnaylyticsObject);